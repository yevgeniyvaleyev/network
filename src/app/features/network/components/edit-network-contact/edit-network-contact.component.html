<app-layout [title]="'Edit Contact'" [config]="tabsConfig" [parentPath]="parentPath" (tabClick)="onTabClick($event)">
  @if(error()) {
  <mat-card>
    {{ error() }}
  </mat-card>
  }
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">
    <mat-form-field>
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" required>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Phone Number</mat-label>
      <input matInput formControlName="phoneNumber">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Last Contact Date</mat-label>
      <input matInput [matDatepicker]="lastContactPicker" formControlName="lastConnect">
      <mat-datepicker-toggle matIconSuffix [for]="lastContactPicker"></mat-datepicker-toggle>
      <mat-datepicker #lastContactPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Planned Reconnection Date</mat-label>
      <input matInput [matDatepicker]="plannedReconnectionPicker" formControlName="plannedReconnectionDate">
      <mat-datepicker-toggle matIconSuffix [for]="plannedReconnectionPicker"></mat-datepicker-toggle>
      <mat-datepicker #plannedReconnectionPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Job Title</mat-label>
      <input matInput formControlName="jobTitle">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Worked At</mat-label>
      <input matInput formControlName="workedAt">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Preferred Communication Channel</mat-label>
      <mat-select formControlName="preferredCommunicationChannel">
        @for (channel of communicationChannels; track channel) {
        <mat-option [value]="channel">{{channel}}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Communication Language</mat-label>
      <mat-select formControlName="communicationLanguage">
        @for (language of communicationLanguages(); track language) {
        <mat-option [value]="language">{{language}}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <input matInput type="email" formControlName="email">
      @if (form.get('email')?.errors?.['email']) {
      <mat-error>Please enter a valid email address</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Reconnection Frequency (days)</mat-label>
      <input matInput type="number" formControlName="reconnectionFrequency" required min="1">
    </mat-form-field>

  </form>
</app-layout>